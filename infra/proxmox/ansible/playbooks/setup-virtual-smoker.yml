---
# Configure virtual smoker device
# Usage: ansible-playbook playbooks/setup-virtual-smoker.yml
# With Tailscale: ansible-playbook playbooks/setup-virtual-smoker.yml --extra-vars "tailscale_auth_key=YOUR_KEY"

- name: Configure Virtual Smoker Device
  hosts: devices
  become: true

  roles:
    - common
    - docker
    - virtual-device
    - tailscale

  post_tasks:
    - name: Display virtual smoker setup summary
      ansible.builtin.debug:
        msg:
          - "Virtual Smoker Device Configuration Complete"
          - "Device ID: {{ device_id | default('not set') }}"
          - "Device Base: {{ device_base_dir }}"
          - "Deploy device software via GitHub Actions workflow"
          - "Tailscale hostname: {{ tailscale_hostname }}"
